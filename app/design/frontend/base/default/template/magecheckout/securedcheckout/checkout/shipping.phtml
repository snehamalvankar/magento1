<?php
/**
 * Magecheckout
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magecheckout.com license that is
 * available through the world-wide-web at this URL:
 * http://wiki.magecheckout.com/general/license.html
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category    Magecheckout
 * @package     Magecheckout_SecuredCheckout
 * @copyright   Copyright (c) 2015 Magecheckout (http://www.magecheckout.com/)
 * @license     http://wiki.magecheckout.com/general/license.html
 */
?>
<?php if ($this->canShip()) : ?>
	<script>
		//<![CDATA[
		var securedCheckoutShippingMethod = new MagecheckoutSecuredCheckoutShippingMethod({
			shipingMethodContainer: '#one-step-checkout-shipping-method',
			shippingMethodElements: 'input[type="radio"][name="shipping_method"]',
			shippingMethodAdvice: '#one-step-checkout-shipping-method .validation-advice.shipping-method',
			saveShippingMethodUrl: '<?php echo $this->getSaveShippingMethodUrl()?>'
		})
		//]]>
	</script>
    <div class="col-wrapper">
        <?php $blockNumber = $this->getNumbering(false); ?>
        <?php if ($blockNumber): ?>
            <div class="onestep-title-number">
                <span class="one-step-checkout-number"><?php echo $blockNumber; ?></span>

                <h2>
                    <?php echo $this->__('SHIPPING METHOD'); ?></h2>
            </div>
        <?php else: ?>
            <div class="onestep-title">
                <h2>
                    <i class="fa fa-truck"></i>
                    <?php echo $this->__('SHIPPING METHOD'); ?></h2>
            </div>
        <?php endif; ?>
        <div class="shipping-methods">
            <?php echo $this->getChildHtml('available'); ?>
        </div>
        <?php if ($this->isEnabledGiftOptions()): ?>
            <?php echo $this->helper('giftmessage/message')->getInline('onepage_checkout', $this->getQuote(), $this->getDontDisplayContainer()) ?>
            <script>
                //<![CDATA[
                var securedCheckoutGiftMessage = new MagecheckoutSecuredCheckoutReviewGiftmessage({
                    giftMessageUrl: '<?php echo $this->getGiftMessageUrl()?>',
                    giftMessageContainer: '#one-step-checkout-shipping-method',
                    giftMessageForm: '#use-gift-message-form',
                    useGiftmessageCheckbox: '#use_gift_messages',
                    isUsedGiftMessage: '#is_used_gift_messages',
                    inputElementIds: $$('.giftmessage-area')

                });
                //]]>
            </script>
        <?php endif; ?>
    </div>
    <?php echo $this->getChildHtml('extra'); ?>
<?php endif; ?>
